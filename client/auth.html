<main class="fit-height auth">
    <form>
        <p>
            <label class="auth-label">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                    <rect width="18" height="17" x="1" y="6" ry="2" stroke-width="2" />
                    <path d="M 22,12 L 29,8 L 29,22 L 22,18 z" stroke-width="2" />
                 </svg>
                <input type="text" name="cam" required>
            </label>
        </p>
        <p>
            <label class="auth-label">
                <svg viewBox="0 0 20 20">
                    <path d="M 5,6 L 5,9 z M 15,6 L 15,9 z M5,6 A5,5 0 0,1 15,6" stroke-width="2" fill="none" />
                    <rect width="14" height="9" x="3" y="10" ry="1" stroke-width="2" />
                </svg>
                <input type="password" name="psw" required>
            </label>
        </p>
        <button type="submit" class="auth-btn">
            <svg viewBox="0 0 45 40" xmlns="http://www.w3.org/2000/svg">
                <path d="M 2,20 L 33,20 z M 20,10 L 33,20 z M 20,30 L 33,20 z" stroke-width="4" />
                <path d="M 10,10 L 10,2  L 43,2  L 43,38 L 10,38 L 10,30" stroke-width="4" fill="none" />
            </svg>
        </button>
    </form>
</main>
<script>
    document.querySelector('form').onsubmit = e => {
        e.preventDefault();
        const data = {};
        for (const pair of new FormData(e.target)) {
            data[pair[0]] = pair[1];
        }
        fetch('/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
        .then(r => r)
        .then(data => {
            if (data.ok) {
                window.location.reload();
            }
            for (const i of document.querySelectorAll('form input')) {
                i.classList.add('error');
            }
        });
    }
</script>
